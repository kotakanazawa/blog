{"pageProps":{"blog":{"id":"53697","createdAt":"2021-04-18T09:27:13.135Z","updatedAt":"2021-04-30T01:39:05.588Z","publishedAt":"2021-04-18T09:27:13.135Z","revisedAt":"2021-04-30T01:39:05.588Z","title":"【Rails】指定した日付の期間で生成されたオブジェクトかどうかを判断する方法","body":"<p>たとえば、先月の月初〜月末に作成されたオブジェクトかどうかを評価したいとき。</p><p>最初にパッと思いついたのは、こんな書き方。</p><pre><code>object.created_at &gt;= 先月の月初 &amp;&amp; object.created_at &lt;= 先月の月末</code></pre><p><br></p><p>たしかにこれでもいけるのだけど、ちょっと長いしナイスに書きたい。</p><p>友人に相談して、こんなふうに書けることを知った。</p><pre><code>1.month.ago.all_month.cover?(object.created_at)</code></pre><p><br></p><p><code>all_month</code>  でその月の期間を範囲で取得できる。</p><pre><code>Rails 6.0.3.4 Ruby 2.6.6 [12] pry(main)&gt; 1.month.ago.all_month\n=&gt; Mon, 01 Mar 2021 00:00:00 JST +09:00..Wed, 31 Mar 2021 23:59:59 JST +09:00</code></pre><p><br></p><p><code>cover?</code>  でその範囲に該当していたら<code>true</code>  を返す。可読性も高いし便利〜。</p><p><br></p><p>参考</p><ul><li><a href=\"https://docs.ruby-lang.org/ja/latest/method/Range/i/=3d=3d=3d.html\" target=\"_blank\" rel=\"noopener noreferrer\">Range#=== (Ruby 3.0.0 リファレンスマニュアル)</a></li><li><a href=\"https://blog.toshimaru.net/datetime-range-check/\" target=\"_blank\" rel=\"noopener noreferrer\">[Ruby]日時が特定日時の範囲内にあるかのチェック - Hack Your Design!</a></li></ul>"}},"__N_SSG":true}